"use strict";var fs=require("fs"),path=require("path"),crypto=require("crypto");module.exports=function(b){b.registerTask("version","Set the versions in scripts.php for CSS/JS",function(){var h="lib/scripts.php";var f=a("assets/css/main.min.css");var e=a("assets/js/scripts.min.js");var d=/(wp_enqueue_style\('roots_main',(\s*[^,]+,){2})\s*[^\)]+\);/;var c=/(wp_register_script\('roots_scripts',(\s*[^,]+,){2})\s*[^,]+,\s*([^\)]+)\);/;var g=b.file.read(h);g=g.replace(d,"$1 '"+f+"');");g=g.replace(c,"$1 '"+e+"', $3);");b.file.write(h,g);b.log.writeln('"'+h+'" updated with new CSS/JS versions.')});var a=function(c){var d=crypto.createHash("md5");d.update(fs.readFileSync(c));b.log.write("Versioning "+c+"...").ok();return d.digest("hex")}};